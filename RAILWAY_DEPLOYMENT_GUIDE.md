# Railway Deployment Guide - Laravel Backend

## ðŸš€ Quick Railway Deployment

### 1. Environment Variables Setup
In your Railway dashboard, add these environment variables:

**Required Database Variables (Auto-generated by Railway MySQL):**
- `MYSQLHOST` - Auto-generated
- `MYSQLPORT` - Auto-generated  
- `MYSQLDATABASE` - Auto-generated
- `MYSQLUSER` - Auto-generated
- `MYSQLPASSWORD` - Auto-generated

**Required App Variables:**
```
APP_KEY=base64:C+kiffgn6xdlxsBUdYno57+AhYtdrqUFLSn1Zso0lcA=
RAILWAY_STATIC_URL=https://your-app-name.railway.app
```

**Optional M-Pesa Variables (for payment functionality):**
```
MPESA_CONSUMER_KEY=your_consumer_key
MPESA_CONSUMER_SECRET=your_consumer_secret
MPESA_SHORTCODE=174379
MPESA_PASSKEY=your_passkey
```

### 2. Database Setup
1. Add MySQL service to your Railway project
2. The database variables will be auto-generated
3. The app will run migrations automatically on startup

### 3. Deployment Steps
1. Push your code to GitHub
2. Connect Railway to your GitHub repository
3. Railway will automatically build using `Dockerfile.railway`
4. Add the environment variables listed above
5. Deploy

### 4. Health Check
The app includes a health check endpoint at `/health` that you can use to verify the app is running.

### 5. Troubleshooting 502 Errors

**Check Railway Logs:**
1. Go to your Railway dashboard
2. Click on your service
3. Go to "Deployments" tab
4. Click on the latest deployment
5. Check "Build Logs" and "Deploy Logs"

**Common Issues:**
- Missing environment variables (especially database)
- Database connection failures
- Migration errors
- Missing APP_KEY

**Quick Test:**
Visit `https://your-app-name.railway.app/health` - should return JSON status.

## Production Checklist
- [ ] MySQL service added to Railway
- [ ] Environment variables configured
- [ ] APP_KEY generated and set
- [ ] RAILWAY_STATIC_URL set to your domain
- [ ] Health check endpoint responding
- [ ] Database migrations completed
- [ ] M-Pesa credentials configured (if using payments)